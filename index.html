<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ë°©ëª…ë¡ ì„œë¹„ìŠ¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-lg">
        <h1 class="text-2xl font-bold mb-4 text-center">ğŸ“ ë°©ëª…ë¡</h1>
        
        <div class="space-y-4">
            <input id="username" type="text" placeholder="ì´ë¦„" class="w-full p-2 border rounded">
            <textarea id="content" placeholder="ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”" class="w-full p-2 border rounded"></textarea>
            <button onclick="saveMessage()" class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600">ë“±ë¡í•˜ê¸°</button>
        </div>

        <div id="messages" class="mt-8 space-y-2">
            <p class="text-gray-500 text-center">ë©”ì‹œì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
    </div>

    <script>
        // âš ï¸ ì—¬ê¸°ì— ë³¸ì¸ì˜ Supabase ì •ë³´ë¥¼ ë„£ìœ¼ì„¸ìš”!
        const SUPABASE_URL = 'ì—¬ëŸ¬ë¶„ì˜_í”„ë¡œì íŠ¸_URL';
        const SUPABASE_KEY = 'ì—¬ëŸ¬ë¶„ì˜_ìµëª…_í‚¤';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // ë©”ì‹œì§€ ì €ì¥ í•¨ìˆ˜
        async function saveMessage() {
            const name = document.getElementById('username').value;
            const content = document.getElementById('content').value;

            const { error } = await supabase
                .from('guestbook')
                .insert([{ name, content }]);

            if (error) alert('ì—ëŸ¬ ë°œìƒ: ' + error.message);
            else {
                alert('ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
                location.reload(); // í™”ë©´ ìƒˆë¡œê³ ì¹¨
            }
        }

        // ë©”ì‹œì§€ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜
        async function loadMessages() {
            const { data, error } = await supabase
                .from('guestbook')
                .select('*')
                .order('created_at', { ascending: false });

            const container = document.getElementById('messages');
            if (data) {
                container.innerHTML = data.map(msg => `
                    <div class="border-b py-2">
                        <strong>${msg.name}</strong>: ${msg.content}
                    </div>
                `).join('');
            }
        }
        loadMessages();
    </script>
</body>
</html>